{"code":"import Point from 'ol/geom/Point';\r\nimport * as ol from 'ol';\r\nimport OSM from 'ol/source/OSM';\r\nimport sVector from 'ol/source/Vector';\r\nimport lVector from 'ol/layer/Vector';\r\nimport { fromLonLat, toLonLat } from 'ol/proj';\r\nimport { Tile as TileLayer } from 'ol/layer';\r\nimport { Icon, Style } from 'ol/style';\r\nimport features from './features';\r\nimport { defaults as defaultInteractions } from 'ol/interaction';\r\nimport KeyboardZoom from 'ol/interaction/KeyboardZoom';\r\nimport { defaults as defaultControls } from 'ol/control';\r\nvar iconStyle = new Style({\r\n    image: new Icon(({\r\n        anchor: [0.5, 18],\r\n        anchorXUnits: 'fraction',\r\n        anchorYUnits: 'pixels',\r\n        src: 'assets/img/rico.png'\r\n    }))\r\n});\r\nvar activeStyle = new Style({\r\n    image: new Icon(({\r\n        anchor: [0.5, 18],\r\n        anchorXUnits: 'fraction',\r\n        anchorYUnits: 'pixels',\r\n        src: 'assets/img/bico.png'\r\n    }))\r\n});\r\nfeatures.icons.forEach(function (element) {\r\n    element.setStyle(iconStyle);\r\n});\r\nvar vectorSource = new sVector({\r\n    features: features.icons\r\n});\r\nvar vectorLayer = new lVector({\r\n    source: vectorSource\r\n});\r\nvar map = new ol.Map({\r\n    layers: [\r\n        new TileLayer({\r\n            source: new OSM(),\r\n        }),\r\n        vectorLayer\r\n    ],\r\n    target: 'map',\r\n    view: new ol.View({\r\n        center: fromLonLat([15.6979, 48.2831]),\r\n        zoom: 15,\r\n        maxZoom: 18,\r\n    }),\r\n    interactions: defaultInteractions({ keyboard: false }).extend([new KeyboardZoom()]),\r\n    controls: defaultControls({ attribution: false })\r\n});\r\nvar bb = 0;\r\nmap.on('click', function (evt) {\r\n    if (bb == 1) {\r\n        var coords = toLonLat(evt.coordinate);\r\n        var lat = coords[1];\r\n        var lon = coords[0];\r\n        bb = 0;\r\n        document.getElementById(\"map\").style.cursor = \"\";\r\n        document.getElementById(\"add_btn\").style.cursor = \"\";\r\n        var ft = new ol.Feature({\r\n            geometry: new Point(fromLonLat([lon, lat])),\r\n        });\r\n        ft.setStyle(activeStyle);\r\n        var vss = new sVector({\r\n            features: [ft],\r\n        });\r\n        var vll = new lVector({\r\n            source: vss,\r\n        });\r\n        map.addLayer(vll);\r\n    }\r\n});\r\n$(document).on('keydown', function (e) {\r\n    if (e.key === \"a\") {\r\n        document.getElementById(\"map\").style.cursor = \"url('assets/img/icon.png'), auto\";\r\n        document.getElementById(\"add_btn\").style.cursor = \"url('assets/img/icon.png'), auto\";\r\n        bb = 1;\r\n    }\r\n});\r\nmap.on('pointermove', function (e) {\r\n    var pixel = map.getEventPixel(e.originalEvent);\r\n    var hit = map.hasFeatureAtPixel(pixel);\r\n    map.getViewport().style.cursor = hit ? 'marker' : '';\r\n});\r\ndocument.getElementById('map').focus();\r\nvar img = document.getElementById('img');\r\n$(\"#add_btn\").on('click', function () {\r\n    document.getElementById(\"map\").style.cursor = \"grabbing\";\r\n    document.getElementById(\"add_btn\").style.cursor = \"grabbing\";\r\n    bb = 1;\r\n});\r\n","references":["/home/paulj/hzbg/editor/node_modules/ol/geom/Point.js","/home/paulj/hzbg/editor/node_modules/ol/index.js","/home/paulj/hzbg/editor/node_modules/ol/source/OSM.js","/home/paulj/hzbg/editor/node_modules/ol/source/Vector.js","/home/paulj/hzbg/editor/node_modules/ol/layer/Vector.js","/home/paulj/hzbg/editor/node_modules/ol/proj.js","/home/paulj/hzbg/editor/node_modules/ol/layer.js","/home/paulj/hzbg/editor/node_modules/ol/style.js","/home/paulj/hzbg/editor/features.ts","/home/paulj/hzbg/editor/node_modules/ol/interaction.js","/home/paulj/hzbg/editor/node_modules/ol/interaction/KeyboardZoom.js","/home/paulj/hzbg/editor/node_modules/ol/Collection.js","/home/paulj/hzbg/editor/node_modules/ol/control.js"]}
